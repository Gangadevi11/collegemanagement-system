
<!DOCTYPE HTML>
<html>
<head>
    <title>Novus Admin Panel | Basic Forms</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Novus Admin Panel Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, SmartPhone Compatible web template, free WebDesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
    <script type="application/x-javascript"> 
        addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); 
        function hideURLbar(){ window.scrollTo(0,1); } 
    </script>
    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
    <!-- Custom CSS -->
    <link href="css/style.css" rel='stylesheet' type='text/css' />
    <!-- Font CSS -->
    <!-- font-awesome icons -->
    <link href="css/font-awesome.css" rel="stylesheet"> 
    <!-- //font-awesome icons -->
    <!-- JS -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/modernizr.custom.js"></script>
    <!-- Webfonts -->
    <link href='//fonts.googleapis.com/css?family=Roboto+Condensed:400,300,300italic,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <!-- Animate CSS -->
    <link href="css/animate.css" rel="stylesheet" type="text/css" media="all">
    <script src="js/wow.min.js"></script>
    <script> new WOW().init(); </script>
    <!-- Metis Menu -->
    <script src="js/metisMenu.min.js"></script>
    <script src="js/custom.js"></script>
    <link href="css/custom.css" rel="stylesheet">
    <!-- //Metis Menu -->
</head> 
<body class="cbp-spmenu-push">
    <div class="main-content">
        <!-- Sidebar -->
        <div class="sidebar" role="navigation">
            <div class="navbar-collapse">
                <nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" id="cbp-spmenu-s1">
                    <ul class="nav" id="side-menu">
                        <li><a href="index.html"><i class="fa fa-home nav_icon"></i>Dashboard</a></li>
                        <li>
                            <a href="#"><i class="fa fa-cogs nav_icon"></i>Components <span class="nav-badge">12</span> <span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level collapse">
                                <li><a href="grids.html">Grid System</a></li>
                                <li><a href="media.html">Media Objects</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-book nav_icon"></i>UI Elements <span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level collapse">
                                <li><a href="forms.php">Add Students<span class="nav-badge-btm">08</span></a></li>
                                <li><a href="tables.php">View Students</a></li>
                                <li>
									<a href="form.php">Add courses</a>
                            </ul>
                        </li>
                        <li><a href="widgets.html"><i class="fa fa-th-large nav_icon"></i>Widgets <span class="nav-badge-btm">08</span></a></li>
                        <li>
                            <a href="#"><i class="fa fa-envelope nav_icon"></i>Mailbox<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level collapse">
                                <li><a href="inbox.html">Inbox <span class="nav-badge-btm">05</span></a></li>
                                <li><a href="compose.html">Compose email</a></li>
                            </ul>
                        </li>
                        <li><a href="tables.html"><i class="fa fa-table nav_icon"></i>Tables <span class="nav-badge">05</span></a></li>
                        <li>
                            <a href="#"><i class="fa fa-check-square-o nav_icon"></i>Forms<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level collapse">
                                <li><a href="forms.php">Basic Forms <span class="nav-badge-btm">07</span></a></li>
                                <li><a href="validation.html">Validation</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-file-text-o nav_icon"></i>Pages<span class="nav-badge-btm">02</span><span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level collapse">
                                <li><a href="main.php">Login</a></li>
                                <li><a href="signup.html">SignUp</a></li>
                                <li><a href="blank-page.html">Blank Page</a></li>
                            </ul>
                        </li>
                        <li><a href="charts.html" class="chart-nav"><i class="fa fa-bar-chart nav_icon"></i>Charts <span class="nav-badge-btm pull-right">new</span></a></li>
                    </ul>
                    <div class="clearfix"> </div>
                </nav>
            </div>
        </div>
        <!-- Sidebar ends -->
        
        <!-- Header -->
        <div class="sticky-header header-section">
            <div class="header-left">
                <!-- Toggle button -->
                <button id="showLeftPush"><i class="fa fa-bars"></i></button>
                <!-- Logo -->
                <div class="logo">
                    <a href="main.php">
                        <h1>NOVUS</h1>
                        <span>AdminPanel</span>
                    </a>
                </div>
                <!-- Search box -->
                <div class="search-box">
                    <form class="input">
                        <input class="sb-search-input input__field--madoka" placeholder="Search..." type="search" id="input-31" />
                        <label class="input__label" for="input-31">
                            <svg class="graphic" width="100%" height="100%" viewBox="0 0 404 77" preserveAspectRatio="none">
                                <path d="m0,0l404,0l0,77l-404,0l0,-77z"/>
                            </svg>
                        </label>
                    </form>
                </div>
                <div class="clearfix"> </div>
            </div>
            <div class="header-right">
                <!-- Notification and user profile section -->
                <div class="profile_details_left">
                    <!-- Notifications -->
                    <ul class="nofitications-dropdown">
                        <!-- Messages -->
                        <li class="dropdown head-dpdn">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-envelope"></i><span class="badge">3</span></a>
                            <ul class="dropdown-menu">
                                <li><div class="notification_header"><h3>You have 3 new messages</h3></div></li>
                                <li><a href="#"><div class="user_img"><img src="images/1.png" alt=""></div><div class="notification_desc"><p>Lorem ipsum dolor amet</p><p><span>1 hour ago</span></p></div></a></li>
                                <li class="odd"><a href="#"><div class="user_img"><img src="images/2.png" alt=""></div><div class="notification_desc"><p>Lorem ipsum dolor amet</p><p><span>1 hour ago</span></p></div></a></li>
                                <li><a href="#"><div class="user_img"><img src="images/3.png" alt=""></div><div class="notification_desc"><p>Lorem ipsum dolor amet</p><p><span>1 hour ago</span></p></div></a></li>
                                <li><div class="notification_bottom"><a href="#">See all messages</a></div></li>
                            </ul>
                        </li>
                        <!-- Notifications -->
                        <li class="dropdown head-dpdn">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-bell"></i><span class="badge blue">3</span></a>
                            <ul class="dropdown-menu">
                                <li><div class="notification_header"><h3>You have 3 new notifications</h3></div></li>
                                <li><a href="#"><div class="user_img"><img src="images/2.png" alt=""></div><div class="notification_desc"><p>Lorem ipsum dolor amet</p><p><span>1 hour ago</span></p></div></a></li>
                                <li class="odd"><a href="#"><div class="user_img"><img src="images/1.png" alt=""></div><div class="notification_desc"><p>Lorem ipsum dolor amet</p><p><span>1 hour ago</span></p></div></a></li>
                                <li><a href="#"><div class="user_img"><img src="images/3.png" alt=""></div><div class="notification_desc"><p>Lorem ipsum dolor amet</p><p><span>1 hour ago</span></p></div></a></li>
                                <li><div class="notification_bottom"><a href="#">See all notifications</a></div></li>
                            </ul>
                        </li>
                    </ul>
                    <div class="clearfix"> </div>
                </div>
                <!-- User profile dropdown -->
                <div class="profile_details">  
                    <ul>
                        <li class="dropdown profile_details_drop">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                <div class="profile_img">  
                                    <span class="prfil-img"><img src="images/2.png" alt=""> </span> 
                                    <div class="user-name">
                                        <p>Michael</p>
                                        <span>Administrator</span>
                                    </div>
                                    <i class="fa fa-angle-down lnr"></i>
                                    <i class="fa fa-angle-up lnr"></i>
                                    <div class="clearfix"></div>    
                                </div>  
                            </a>
                            <ul class="dropdown-menu drp-mnu">
                                <li><a href="#"><i class="fa fa-cog"></i> Settings</a></li> 
                                <li><a href="#"><i class="fa fa-user"></i> Profile</a></li> 
                                <li><a href="logout.php"><i class="fa fa-sign-out"></i> Logout</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="clearfix"> </div>               
            </div>
            <div class="clearfix"> </div>   
        </div>
        <!-- Header ends -->
        <style>
			* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
	* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    background-color: #f0f4f7;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.form-container {
    background-color: ;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    width: 600px;
	margin-left:500px;
	margin-top:100px;
}

h1 {
    text-align: center;
    margin-bottom: 20px;
    color: gold;
}

.form-group {
    margin-bottom: 15px;
}

label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}

input, select, textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 16px;
}

textarea {
    resize: vertical;
}

button {
    width: 100%;
    padding: 10px;
    background-color: #28a745;
    color: white;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
}

button:hover {
    background-color: #218838;
}
.form-group label, .form-group input {
        display: inline;
        margin-right: 10px;
    }

}
</style>


<?php
require("connection.php");

// Fetching user data based on the given id
$id = $_REQUEST["edit"];
$res = $con->query("SELECT * FROM formaction WHERE id = $id");
$count = $res->num_rows;

if ($count > 0) {
    $row_user = $res->fetch_assoc(); // Renamed to avoid conflict later
}
?>

<div class="form-container">
    <center>
    <h1>Student Registration Form</h1>
    <form action="userupdate.php" method="POST" enctype="multipart/form-data">
        <input type="hidden" class="form-control" value="<?php echo $row_user['id']; ?>" name="id">
        
        <!-- Name Field -->
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" class="form-control" value="<?php echo $row_user['Name']; ?>" name="name" required>
        </div>
        
        <!-- Email Field -->
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="<?php echo $row_user['email']; ?>" required>
        </div>
        
        <!-- Date of Birth Field -->
        <div class="form-group">
            <label for="dob">Date of Birth:</label>
            <input type="date" id="dob" name="dob" value="<?php echo $row_user['dob']; ?>" required>
        </div>
        
        <!-- Gender Field -->
        <div class="form-group">
            <label for="gender">Gender:</label><br>
            <label for="male">Male</label>
            <input type="radio" id="male" name="gender" value="male" <?php if($row_user['gender'] == "male") echo 'checked'; ?>>
            <label for="female">Female</label>
            <input type="radio" id="female" name="gender" value="female" <?php if($row_user['gender'] == "female") echo 'checked'; ?>>

        <!-- Phone Number Field -->
        <div class="form-group">
            <label for="phone">Phone Number:</label>
            <input type="tel" id="phone" name="phonenumber" value="<?php echo $row_user['pno']; ?>" pattern="[0-9]{10}" placeholder="1234567890" required>
        </div>

        <!-- Address Field -->
        <div class="form-group">
            <label for="address">Address:</label>
            <textarea id="address" name="address" required><?php echo $row_user['address']; ?></textarea>
        </div>

        <!-- Course Field -->
        <div class="form-group">
        
            <label for="course">Course:</label>
            <input type="text" id="course" name="course" value=<?php echo $row_user['course'];?> required>
    
        </div>
        
        <!-- Country Field -->
        <div class="form-group">
            <label for="country">Country:</label>
            <select id="country" name="country" required>
                <option value="">Select Country</option>
                <?php
                // Fetching countries
                $res_country = $con->query("SELECT * FROM countries");
                $count_country = $res_country->num_rows;

                if ($count_country > 0) {
                    while ($row_country = $res_country->fetch_assoc()) {
                        $selected = ($row_user['countries'] == $row_country['cont_id']) ? 'selected' : '';
                        echo "<option value='" . htmlspecialchars($row_country['cont_id']) . "' $selected>" . htmlspecialchars($row_country['name']) . "</option>";
                    }
                } else {
                    echo 'No country available';
                }
                ?>
            </select>
        </div>

        <!-- State Field -->
        <div class="form-group">
            <label for="state">State:</label>
            <select id="state" name="state" required>
                <option value="sel_state">--Select State--</option>
                <?php
                if (isset($row_user['countries'])) {
                    $country_id = $row_user['countries'];
                    $res_state = $con->query("SELECT * FROM states WHERE country_id = $country_id");

                    if ($res_state->num_rows > 0) {
                        while ($row_state = $res_state->fetch_assoc()) {
                            $selected = ($row_user['state'] == $row_state['stat_id']) ? 'selected' : '';
                            echo "<option value='" . htmlspecialchars($row_state['stat_id']) . "' $selected>" . htmlspecialchars($row_state['sname']) . "</option>";
                        }
                    } else {
                        echo '<option>No States Available</option>';
                    }
                } else {
                    echo '<option>Select a country first</option>';
                }
                ?>
            </select>
        </div>

        <!-- Image Upload -->
        <div class="form-group">
            <label for="image">Profile Image:</label>
            <input type="file" name="image" id="image"/>
            <?php if (!empty($row_user['image'])): ?>
                <img src="<?php echo 'images/' . $row_user['image']; ?>" height="100px" width="100px">
            <?php else: ?>
                <p>No image uploaded</p>
            <?php endif; ?>
        </div>
        <button>update</button>


    </form>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>



<script type="text/javascript">
$(document).ready(function() {
    // When the country dropdown changes
    $('#country').change(function() {
        var country = $(this).val(); 

        console.log(country);

        $.ajax({
            url: 'search_state.php',
            type: 'POST',
            data: { country: country },
            success: function(res) {
                console.log(res); 

                $('#state').html(res); 
            },
            error: function() {
                alert('Error occurred while fetching states'); // Error handler
            }
        });
    });
});
</script>




<!-- smooth scrolling -->
	<script type="text/javascript">
		$(document).ready(function() {
		/*
			var defaults = {
			containerID: 'toTop', // fading element id
			containerHoverID: 'toTopHover', // fading element hover id
			scrollSpeed: 1200,
			easingType: 'linear' 
			};
		*/								
		$().UItoTop({ easingType: 'easeOutQuart' });
		});
	</script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.js"> </script>
</body>
</html>
